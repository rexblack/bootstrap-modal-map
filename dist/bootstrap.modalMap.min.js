/*! bootstrap-modal-map 06-08-2014 */
!function(a,b){function c(b,c){return this.each(function(){var d=a(this),f=d.data("bs.modal"),g=a.extend({},e.DEFAULTS,d.data(),"object"==typeof b&&b);f?f.options=a.extend({},f.options,b):d.data("bs.modal",f=new e(this,g)),"string"==typeof b?f[b](c):g.show&&f.show(c)})}var d=a.fn.modal,e=function(){d.Constructor.apply(this,arguments)};e.DEFAULTS=a.extend({},d.Constructor.DEFAULTS,{defaultMaxHeight:300,map:{zoom:15}});var f,g,h;e.prototype=a.extend({},d.Constructor.prototype,{constructor:e,_super:function(){var b=a.makeArray(arguments);d.Constructor.prototype[b.shift()].apply(this,b)},show:function(){var c=this.options,d=this.$element.find(".modal-body"),e=new google.maps.LatLng(c.latitude,c.longitude);this.$element.css("display","block");var i=this.$element.find(".modal-title");i.html(c.title),d.innerHTML="",f||(this.$mapElement=f=a('<div class="modal-map-element"></div>')),d.append(f),g||(this.map=g=new google.maps.Map(f[0],c.map)),g.setCenter(e),h&&h.setMap(null);var j={position:e,map:g};c.title&&(j.title=c.title),h=new google.maps.Marker(j),this._super("show");var k=this;a(b).on("resize",this._resizeDelegate=function(){k.resize()}),this.resize()},hide:function(){a(b).off("resize",this._resizeDelegate),this._super("hide")},resize:function(){var c=this.$element.find(".modal-dialog"),d=this.$element.find(".modal-body");d.css("max-height","");var e=parseFloat(d.css("max-height"));isNaN(e)&&(e=this.options.defaultContentHeight,d.css("max-height",e+"px"));var f=a(b).height(),h=this.$element.find(".modal-footer").outerHeight(!1),i=this.$element.find(".modal-header").outerHeight(!1),j=parseFloat(c.css("margin-top"))+parseFloat(c.css("border-top-width")),k=parseFloat(c.css("margin-bottom"))+parseFloat(c.css("border-bottom-width")),l=f-j-k-h-i;d.outerHeight(l),this.$mapElement.outerHeight(d.height());var m=g.getCenter();google.maps.event.trigger(g,"resize"),g.setCenter(m)}}),a.fn.modalMap=c,a.fn.modalMap.Constructor=e,a(document).on("click.bs.modal.data-api",'[data-toggle="modal-map"]',function(b){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""));option=a.extend({remote:!/#/.test(e)&&e},f.data(),d.data()),d.is("a")&&b.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),c.call(f,option,this)})}(jQuery,window);